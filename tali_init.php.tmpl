<?php
/*
--TALI Settings File--
This file houses paths to necessary files/folders, values of variables, 
and numerous other definitions that are vital to the proper integration
and operation of TALI on a website. Place this file immediatly inside or
anywhere outside the provided "tali" folder. 
*/

/* DO NOT EDIT THE BELOW SECTION */

//Makes sure session_started if not already done by non-TALI head
if (session_status() == PHP_SESSION_NONE) {
	session_start();
}

//If TALI Session already exists, no need to redefine everything here
if (isset($_SESSION['TALI_Version'])) {
	//Skip initialization definitions and enter TALI
		//If working between multiple TALI-included projects, 
		//comment out the below goto to "reset" the session varaibles
	goto EnterTALI;
}

//Declare TALI version
$_SESSION['TALI_Version'] = "0.9";
	
/* FEEL FREE TO EDIT RESPONSIBILY BELOW */

//Set platform
//"wamp" - WAMP development
//"dev" - online development
//"live" - published website
$_SESSION['TALI_Platform'] = "wamp";
//

//Domain URL for absolute URL paths
//Must have https:// or similar protocol
//Do not include www., but do include any pertinent directory (such as m. or dev.)
//A slash (/) must be at the end
//WAMP Domain
$WAMP_Domain_URL = "https://localhost/home/"; //"https://localhost/home/"

//Dev Domain
$Dev_Domain_URL = "https://dev.domain.com/"; //"https://dev.domain.com/"

//Live Domain
$Live_Domain_URL = "https://domain.com/"; //"https://domain.com/"

//Define the name of the website or associated organization, as this will be
//displayed in a few places involved with TALI
$_SESSION['TALI_Organization_Name'] = "Website"; //Default - Website

//Below are the definitions of various critical paths; incorrect inputs will result
//in critical and obvious failure upon execution of any TALI components

//Is "tali_init.php" in the "web root" directory (www, public_html, etc.)?
//If not, you MUST define the absolute directory of the web root below,
//replacing the command and string with a string as directed
$_SESSION['TALI_WEBROOT_ABS_PATH'] = "".realpath(__DIR__)."/"; //Default = realpath(__DIR__)
//If tali_init.php is not in the web root, you must re-define this as a string of the absolute root
//Ex: "/home/username/public_html/cms" (no slash (/) on the right end)
//To find out the root directory, uncomment the below code and reload the page:

//echo getcwd();

//...and use the resulting string to find the web root (remember to wrap in quotations " ")
//

//"tali" folder location relative to the web root
$_SESSION['TALI_URI'] = "tali"; //Default = "tali", indicating it is in the web root
//If folder is not in web root, add pathing to last part of string, ex: "cms/tali"

//Location of file containing sensitive information
//This file is usually a *.ini file which may or may not be in the web root
//If not in use, add // to comment out (avoid leaving sensitive information in plain text in web files)
	//First checking what platform is in use, then will parse (translate & read) the indicated
	//file, returning the data as an array to be referenced later
if ($_SESSION['TALI_Platform'] == "wamp") {
	//If using wamp, config.ini is in "web root"
	$config = parse_ini_file("config.ini");
}
else
{
	//In .dev and live platforms, config.ini is the same and not in the web root
	$config = parse_ini_file("/home/config.ini");
}

//FTP Directory of Live site
$_SESSION['TALI_Live_FTP_Root'] = "/www"; //Default = "/www", maybe need "/public_html" instead

//FTP Directory of Dev site
$_SESSION['TALI_Dev_FTP_Root'] = "/dev"; //Alternative FTP directory; If not using dev site, ignore

//MySQL Database Login Information
//Note - If using a different localhost than WAMP, still leave WAMP in the variable name
//If not using Wamp (or any other locally hosted database for testing) or a Dev
//site, just leave them blank and use Live for the published website.
//WAMP Database Login
$_SESSION['TALI_WAMP_DB_Username'] = $config['TALI_WAMP_DB_Username'];
$_SESSION['TALI_WAMP_DB_Password'] = $config['TALI_WAMP_DB_Password'];
$_SESSION['TALI_WAMP_DB_dbName'] = "dbName";
$_SESSION['TALI_WAMP_DB_Server'] = "localhost";

//Dev Database Login
$_SESSION['TALI_Dev_DB_Username'] = $config['TALI_Dev_DB_Username'];
$_SESSION['TALI_Dev_DB_Password'] = $config['TALI_Dev_DB_Password'];
$_SESSION['TALI_Dev_DB_dbName'] = "dbName";
$_SESSION['TALI_Dev_DB_Server'] = "localhost";

//Live Database Login
$_SESSION['TALI_Live_DB_Username'] = $config['TALI_Live_DB_Username'];
$_SESSION['TALI_Live_DB_Password'] = $config['TALI_Live_DB_Password'];
$_SESSION['TALI_Live_DB_dbName'] = "dbName";
$_SESSION['TALI_Live_DB_Server'] = "localhost";

//FTP Login Information
//Note - If using a different localhost than WAMP, still leave WAMP in the variable name
//If not using Wamp (or any other local host for testing) or a Dev
//site, just leave them blank and use Live for the published website.
//WAMP FTP Login
$_SESSION['TALI_WAMP_FTP_URL'] = "ftp.domain.com";
$_SESSION['TALI_WAMP_FTP_Username'] = $config['TALI_WAMP_FTP_Username'];
$_SESSION['TALI_WAMP_FTP_Password'] = $config['TALI_WAMP_FTP_Password'];

//Dev FTP Login
$_SESSION['TALI_Dev_FTP_URL'] = "ftp.domain.com";
$_SESSION['TALI_Dev_FTP_Username'] = $config['TALI_Dev_FTP_Username'];
$_SESSION['TALI_Dev_FTP_Password'] = $config['TALI_Dev_FTP_Password'];

//Live FTP Login
$_SESSION['TALI_Live_FTP_URL'] = "ftp.domain.com";
$_SESSION['TALI_Live_FTP_Username'] = $config['TALI_Live_FTP_Username'];
$_SESSION['TALI_Live_FTP_Password'] = $config['TALI_Live_FTP_Password'];

//E-Mail SMTP Login Information
//Uses PHPMailer (https://github.com/PHPMailer/PHPMailer) to send e-mails
//through local or remote SMTP server as defined
$_SESSION['TALI_SMTP_hostname'] = "mail.domain.com";
$_SESSION['TALI_SMTP_port'] = 465;
$_SESSION['TALI_SMTP_secure'] = "ssl"; //"ssl" or "tls"
$_SESSION['TALI_SMTP_username'] = $config['TALI_SMTP_username'];
$_SESSION['TALI_SMTP_password'] = $config['TALI_SMTP_password'];
$_SESSION['TALI_SMTP_fromAddress'] = "email@domain.com";
$_SESSION['TALI_SMTP_fromName'] = "From Me";

//TALI HomeSlider images folder location from web root
$_SESSION['TALI_HomeSlider_Images_Directory'] = "/tali/talisupplement/homeslider/";

//TALI Awards images folder location from web root
$_SESSION['TALI_Awards_Images_Directory'] = "/tali/talisupplement/personnel/awards/";

//TALI Ranks images folder location from web root
$_SESSION['TALI_Ranks_Images_Directory'] = "/tali/talisupplement/personnel/ranks/";

//Web URL to cPanel
$_SESSION['TALI_Index_cPanel_Link'] = "https://cpanel.hostname.com/";

/* DO NOT EDIT THE BELOW SECTION */

//Defining Domain URL based on selected platform
switch ($_SESSION['TALI_Platform']) {
	case "wamp":
		$_SESSION['TALI_Domain_URL'] = $WAMP_Domain_URL;
	break;
	case "dev":
		$_SESSION['TALI_Domain_URL'] = $Dev_Domain_URL;
	break;
	case "live":
		$_SESSION['TALI_Domain_URL'] = $Live_Domain_URL;
	break;
}

//Defines TALI directory by combining the absolute root of the website defined above with the URI of the TALI folder defined above
$_SESSION['TALI_ABS_PATH'] = "".$_SESSION['TALI_WEBROOT_ABS_PATH']."".$_SESSION['TALI_URI'].""; 
	
//Make sure TALI directory properly defined, and if it doesn't, announce failure
if (!file_exists($_SESSION['TALI_ABS_PATH'])) {
    exit("Error Loading Page: tali folder not found.");
}
	
//Defines TALISupplement directory using the location of the TALI folder
$_SESSION['TALI_TALISupplement_ABS_PATH'] = "".$_SESSION['TALI_ABS_PATH']."/talisupplement"; 
$_SESSION['TALI_TALISupplement_URI'] = "".$_SESSION['TALI_URI']."/talisupplement";

//Defines tali_init.php path directly
$_SESSION['TALI_init_ABS_PATH'] = realpath(__FILE__); 

//Enter TALI
EnterTALI:
require "".$_SESSION['TALI_TALISupplement_ABS_PATH']."/includes/talihead.php";

/* */
?>